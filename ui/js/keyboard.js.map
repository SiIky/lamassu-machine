{"version":3,"sources":["../src/keyboard.js"],"names":["$","caretTo","el","index","createTextRange","range","move","select","selectionStart","focus","setSelectionRange","caretPos","document","setEndPoint","selection","createRange","e","text","length","fn","caret","offset","get","queue","next","isNaN","i","val","indexOf","caretToStart","caretToEnd","jQuery","KEYBOARD_TIMEOUT","emailRegex","Keyboard","options","keyboardId","id","keyboard","inputBox","keyCase","backspaceTimeout","active","constraint","constraintButtons","setComplianceTimeout","prototype","init","callback","getElementById","self","addEventListener","target","hasClass","_toggleShift","_toggleSym","_backspace","_keyPress","_validateInput","find","_backspaceUp","reset","data","activate","deactivate","hide","show","is","ascii_code","attr","addClass","window","setTimeout","removeClass","character","String","fromCharCode","content","result","substring","clearTimeout","slice","setInputBox","newInputBox","setConstraint","constraintType","_validateSpaceSeparation","_validateNoConstraint","_validateEmail","includes","forEach","buttonId","trim","test"],"mappings":"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","file":"keyboard.js","sourcesContent":["/* globals $ */\r\n\r\n// Set caret position easily in jQuery\r\n// Written by and Copyright of Luke Morton, 2011\r\n// Licensed under MIT\r\n(function ($) {\r\n  // Behind the scenes method deals with browser\r\n  // idiosyncrasies and such\r\n  $.caretTo = function (el, index) {\r\n    if (el.createTextRange) {\r\n      var range = el.createTextRange()\r\n      range.move('character', index)\r\n      range.select()\r\n    } else if (el.selectionStart !== null) {\r\n      el.focus()\r\n      el.setSelectionRange(index, index)\r\n    }\r\n  }\r\n\r\n  // Another behind the scenes that collects the\r\n  // current caret position for an element\r\n\r\n  // TODO: Get working with Opera\r\n  $.caretPos = function (el) {\r\n    if ('selection' in document) {\r\n      var range = el.createTextRange()\r\n      try {\r\n        range.setEndPoint('EndToStart', document.selection.createRange())\r\n      } catch (e) {\r\n        // Catch IE failure here, return 0 like\r\n        // other browsers\r\n        return 0\r\n      }\r\n      return range.text.length\r\n    } else if (el.selectionStart !== null) {\r\n      return el.selectionStart\r\n    }\r\n  }\r\n\r\n  // The following methods are queued under fx for more\r\n  // flexibility when combining with $.fn.delay() and\r\n  // jQuery effects.\r\n\r\n  // Set caret to a particular index\r\n  $.fn.caret = function (index, offset) {\r\n    if (typeof (index) === 'undefined') {\r\n      return $.caretPos(this.get(0))\r\n    }\r\n\r\n    return this.queue(function (next) {\r\n      if (isNaN(index)) {\r\n        var i = $(this).val().indexOf(index)\r\n\r\n        if (offset === true) {\r\n          i += index.length\r\n        } else if (typeof (offset) !== 'undefined') {\r\n          i += offset\r\n        }\r\n\r\n        $.caretTo(this, i)\r\n      } else {\r\n        $.caretTo(this, index)\r\n      }\r\n\r\n      next()\r\n    })\r\n  }\r\n\r\n  // Set caret to beginning of an element\r\n  $.fn.caretToStart = function () {\r\n    return this.caret(0)\r\n  }\r\n\r\n  // Set caret to the end of an element\r\n  $.fn.caretToEnd = function () {\r\n    return this.queue(function (next) {\r\n      $.caretTo(this, $(this).val().length)\r\n      next()\r\n    })\r\n  }\r\n}(jQuery))\r\n\r\nconst KEYBOARD_TIMEOUT = 30000\r\nconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\r\nvar Keyboard = function (options) {\r\n  this.keyboardId = options.id\r\n  this.keyboard = $('#' + options.id)\r\n  this.inputBox = $(options.inputBox)\r\n  this.keyCase = options.keyCase || 'lc'\r\n  this.backspaceTimeout = options.backspaceTimeout || null\r\n  this.active = options.active || true\r\n  this.constraint = options.constraint || null\r\n  this.constraintButtons = []\r\n  this.setComplianceTimeout = options.setComplianceTimeout\r\n}\r\n\r\nKeyboard.prototype.init = function init (callback) {\r\n  this.callback = callback ? callback : null\r\n  var keyboard = document.getElementById(this.keyboardId)\r\n  var self = this\r\n  keyboard.addEventListener('mousedown', function (e) {\r\n    setComplianceTimeout()\r\n    if (!self.active) return\r\n    var target = $(e.target)\r\n    if (target.hasClass('shift')) {\r\n      self._toggleShift()\r\n    } else if (target.hasClass('sym')) {\r\n      self._toggleSym()\r\n    } else if (target.hasClass('backspace')) {\r\n      self._backspace(target)\r\n    } else if (target.hasClass('key')) {\r\n      self._keyPress(target)\r\n    }\r\n    self._validateInput()\r\n  })\r\n\r\n  if (this.keyboardId === 'wifi-keyboard') {\r\n    this.keyboard.find('.entry .backspace').get(0).addEventListener('mouseup', function (e) {\r\n      var target = $(e.target)\r\n      self._backspaceUp(target)\r\n    })\r\n  }\r\n  return this\r\n}\r\n\r\nKeyboard.prototype.reset = function reset () {\r\n  this.inputBox.data('content', '').val('')\r\n}\r\n\r\nKeyboard.prototype.activate = function activate () {\r\n  this.active = true\r\n  this.reset()\r\n}\r\n\r\nKeyboard.prototype.deactivate = function deactivate () {\r\n  this.active = false\r\n}\r\n\r\nKeyboard.prototype._toggleShift = function _toggleShift () {\r\n  if (this.keyCase === 'lc') {\r\n    this.keyCase = 'uc'\r\n    this.keyboard.find('.keyboard-lc').hide()\r\n    this.keyboard.find('.keyboard-uc').show()\r\n  } else {\r\n    this.keyCase = 'lc'\r\n    this.keyboard.find('.keyboard-uc').hide()\r\n    this.keyboard.find('.keyboard-lc').show()\r\n  }\r\n}\r\n\r\nKeyboard.prototype._toggleSym = function _toggleSym () {\r\n  if (this.keyboard.find('.keyboard-sym').is(':visible')) {\r\n    this.keyboard.find('.keyboard-sym').hide()\r\n    if (this.keyCase === 'lc') {\r\n      this.keyboard.find('.keyboard-lc').show()\r\n    } else {\r\n      this.keyboard.find('.keyboard-uc').show()\r\n    }\r\n  } else {\r\n    this.keyboard.find('.keyboard-lc').hide()\r\n    this.keyboard.find('.keyboard-uc').hide()\r\n    this.keyboard.find('.keyboard-sym').show()\r\n  }\r\n}\r\n\r\nKeyboard.prototype._keyPress = function _keyPress (target) {\r\n  var ascii_code = target.attr('data-ascii')\r\n  if (ascii_code) {\r\n    target.addClass('active')\r\n    window.setTimeout(function () { target.removeClass('active') }, 500)\r\n    var inputBox = this.inputBox\r\n    var character = String.fromCharCode(ascii_code)\r\n    // var displayCharacter = (ascii_code === 32) ? \"␣\" : character\r\n    var content = inputBox.data('content') + character\r\n    inputBox.data('content', content)\r\n    inputBox.val(content)\r\n    inputBox.caretToEnd()\r\n    if (this.keyCase === 'uc') {\r\n      this._toggleShift()\r\n    }\r\n  }\r\n}\r\n\r\nKeyboard.prototype._backspace = function _backspace (target) {\r\n  if (this.keyboardId !== 'wifi-keyboard') {\r\n    var inputBox = this.inputBox\r\n    var content = inputBox.data('content')\r\n    var result = content.substring(0, content.length - 1)\r\n    inputBox.data('content', result)\r\n    inputBox.val(result)\r\n    inputBox.caretToEnd()\r\n  } else {\r\n    target.addClass('active')\r\n    var inputBox = this.inputBox\r\n    window.clearTimeout(this.backspaceTimeout)\r\n    this.backspaceTimeout = window.setTimeout(function () {\r\n      inputBox.data('content', '')\r\n      inputBox.val('')\r\n      inputBox.caretToEnd()\r\n    }, 1000)\r\n  }\r\n}\r\n\r\nKeyboard.prototype._backspaceUp = function _backspaceUp (target) {\r\n  window.clearTimeout(this.backspaceTimeout)\r\n  if (!target) return\r\n  target.removeClass('active')\r\n\r\n  var inputBox = this.inputBox\r\n  var content = inputBox.data('content').slice(0, -1)\r\n  inputBox.data('content', content)\r\n\r\n  inputBox.val(content)\r\n  inputBox.caretToEnd()\r\n}\r\n\r\n// pass the class or id of the new input box to put text into, include the . or # as well\r\nKeyboard.prototype.setInputBox = function setInputBox(newInputBox, constraintButtons = []) {\r\n  this.inputBox = $(newInputBox)\r\n  if (!this.inputBox.data('content'))\r\n    this.inputBox.data('content', '').val('')\r\n  if (constraintButtons.length > 0) {\r\n    this.constraintButtons = constraintButtons\r\n  }\r\n  this._validateInput()\r\n}\r\n\r\nKeyboard.prototype.setConstraint = function setConstraint(constraintType, constraintButtons = []) {\r\n  this.constraint = constraintType\r\n  this.constraintButtons = constraintButtons\r\n  this._validateInput()\r\n}\r\n\r\nKeyboard.prototype._validateInput = function _validateInput() {\r\n  switch(this.constraint) {\r\n    case \"spaceSeparation\":\r\n      this._validateSpaceSeparation()\r\n      break\r\n    case \"none\":\r\n      this._validateNoConstraint()\r\n      break\r\n    case \"email\":\r\n      this._validateEmail()\r\n    default:\r\n      break\r\n  }\r\n}\r\n\r\nKeyboard.prototype._validateSpaceSeparation = function _validateSpaceSeparation() {\r\n  // no spaces allowed inside field\r\n  // minimum 1 character per field\r\n  if (!!this.inputBox.data('content') && !this.inputBox.data('content').includes(' ')) {\r\n    this.constraintButtons.forEach(buttonId => {\r\n      $(buttonId).show()\r\n    })\r\n    return\r\n  }\r\n  this.constraintButtons.forEach(buttonId => {\r\n    $(buttonId).hide()\r\n  })\r\n}\r\n\r\nKeyboard.prototype._validateNoConstraint = function _validateSpaceSeparation() {\r\n  // minimum 1 non space character\r\n  if (!!this.inputBox.data('content') && !!this.inputBox.data('content').trim()) {\r\n    this.constraintButtons.forEach(buttonId => {\r\n      $(buttonId).show()\r\n    })\r\n    return\r\n  }\r\n  this.constraintButtons.forEach(buttonId => {\r\n    $(buttonId).hide()\r\n  })\r\n}\r\n\r\nKeyboard.prototype._validateEmail = function _validateEmail() {\r\n  const content = this.inputBox.data('content') || ''\r\n  if (emailRegex.test(content)) {\r\n    this.constraintButtons.forEach(buttonId => {\r\n      $(buttonId).show()\r\n    })\r\n    return\r\n  }\r\n  this.constraintButtons.forEach(buttonId => {\r\n    $(buttonId).hide()\r\n  })\r\n}\r\n"]}